<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alvis' Secret Base</title>
    <link rel="stylesheet" type="text/css" href="public/style.css">
    <style>
        /* Ensure cursor trail z-index and pointer-events */
        .cursor-trail {
            pointer-events: none !important;
            z-index: 9999 !important;
        }
    </style>
</head>
<body>
    <!-- Floating Shapes -->
    <div class="floating-shapes">
        <div class="shape"></div>
        <div class="shape"></div>
        <div class="shape"></div>
    </div>

    <!-- Navigation -->
    <nav id="navbar">
        <div class="nav-container">
            <div class="logo">A.Y.</div>
            <ul class="nav-links">
                <li><a href="#home">Home</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#projects">Exprience/Projects</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="hero-content">
            <h1>Alvis Yan</h1>
            <p>Engineer & CS student @ Cornell</p>
            <div style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;">
                <a href="#about" class="cta-button">
                    <span>About Me</span>
                </a>
                <a href="Resume_New.pdf" class="cta-button" download>
                    <span>Get My Latest Resume</span>
                </a>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="section">
        <div class="container">
            <h2 class="section-title">About Me</h2>
            <div class="about-content">
                <div class="about-text">
                    <h3>Hello! This is Alvis! </h3>
                    <p>I graduated as an undergrad from NYU with a degree in computer science and economics. I will be studying at Cornell University for a graduate program in computer science, with a concentration in machine learning. 

                        As a software engineer, I'm mostly familiar with Python and JavaScript, with proficiency in React.js, Next.js, Express, Flask, and other commonly used tools in web development and software engineering. I'm also good at data analysis and statistics in economics. I'm ready to collaborate with teams of engineers and computer scientists and contribute to large projects/software products.</p>
                </div>
                <div class="skill-bars">
                    <div class="skill">
                        <div class="skill-name">
                            <span>Python</span>
                            <span>90%</span>
                        </div>
                        <div class="skill-bar">
                            <div class="skill-progress" data-width="90"></div>
                        </div>
                    </div>
                    <div class="skill">
                        <div class="skill-name">
                            <span>Javascript</span>
                            <span>85%</span>
                        </div>
                        <div class="skill-bar">
                            <div class="skill-progress" data-width="85"></div>
                        </div>
                    </div>
                    <div class="skill">
                        <div class="skill-name">
                            <span>React</span>
                            <span>95%</span>
                        </div>
                        <div class="skill-bar">
                            <div class="skill-progress" data-width="95"></div>
                        </div>
                    </div>
                    <div class="skill">
                        <div class="skill-name">
                            <span>Machine Learning</span>
                            <span>80%</span>
                        </div>
                        <div class="skill-bar">
                            <div class="skill-progress" data-width="80"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div style="text-align: center; margin-top: 60px;">
                <a href="#projects" class="cta-button">
                    <span>My Works</span>
                </a>
            </div>
        </div>
    </section>

    <!-- Projects Section -->
    <section id="projects" class="section">
        <div class="container">
            <h2 class="section-title">Experience/Projects</h2>
            <div class="projects-carousel-wrapper">
                <button class="carousel-arrow carousel-arrow-left" aria-label="Previous">
                    <span>←</span>
                </button>
                <div class="projects-carousel-viewport">
                    <div class="projects-grid">
                    <div class="project-card">
                        <h3>Software Engineer/Machine Learning Engineer Intern@EyeSpace LLC.</h3>
                        <p>●Design and engage in building a platform for ophthalmologists to manage patients' data and reservations.<br>
                            ●Built deep learning models to predict vault sizes (the space or distance between a contact lens or intraocular lens and the cornea) with OCT images (a kind of X-ray scan of a patient's eyeballs). Achieved around 90% prediction accuracy within 400 microns for Resnet based models. <br>
                            ●Develop, optimize, and maintain company's web application (https://iclvaultapi.streamlit.app/).<br>
                        </p>
                        <div class="project-tech" style="color: gold;">
                            <span>JavaScript • HTML • Pytorch • Transfer Learning • TensorFlow • Keras </span>
                        </div>
                    </div>
                    <div class="project-card">
                        <h3>Software Engineer Intern@XenonHealth</h3>
                        <p>
                            ●Developed a medical record extraction system with a team of engineers that extracts information from medical records (such as billing, payments, and patient information). <br>
                            ●Analyzed, conducted benchmarking experiments on, and optimized the machine learning pipeline that handles payment information extraction from PDF files. Implemented a filtering-extraction two-phase pipeline with automated accuracy tests. Achieved 100% accuracy on a 481-page test set in the latest design. <br>
                            ●Added both front-end and back-end features for billing claim creation, review and submission. Enabled end-to-end claim processing within the platform.  <br>
                        </p>
                        <div class="project-tech" style="color: gold;">
                            <span>Backend Development • PostgreSQL • Docker • React</span>
                        </div>
                    </div>
                    <div class="project-card">
                        <h3>Project Manager Intern/Volunteer@Food Charity Network</h3>
                        <p>
                            ●Coordinated engineering teams to build an application to connect local stores and food donors to local charitable and non-profit organizations. <br>
                            ●Oversaw the development process, manage sprints, identified blockers and constraints, and tracked all activities and changes using Excel. <br>
                            ●Planned quarterly board meetings, prepared and delivered quarterly presentations to stakeholders using Google Slides. <br>
                        </p>
                        <div class="project-tech" style="color: gold;">
                            <span>Project Management • Communication • Excel</span>
                        </div>
                    </div>
                    <div class="project-card">
                        <h3>Could Be Your Company!</h3>
                        <p>Check links below to connect with me!</p>
                        <div class="project-tech" style="color: gold;">
                            <span></span>
                        </div>
                    </div>
                    </div>
                </div>
                <button class="carousel-arrow carousel-arrow-right" aria-label="Next">
                    <span>→</span>
                </button>
            </div>
            <div style="text-align: center; margin-top: 60px;">
                <a href="#contact" class="cta-button">
                    <span>Get In Touch →</span>
                </a>
                <a href="projects.html" class="cta-button">
                    <span>More Projects →</span>
                </a>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="section">
        <div class="container">
            <h2 class="section-title">Get In Touch</h2>
            <div class="contact-links">
                <a href="https://github.com/AlvisYan2025" target="_blank" class="contact-card">
                    <div class="contact-icon">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                        </svg>
                    </div>
                    <div class="contact-info">
                        <h3>GitHub</h3>
                        <p>Check out my code</p>
                    </div>
                </a>
                
                <a href="https://www.linkedin.com/in/alvis-yan-69a194295/" target="_blank" class="contact-card">
                    <div class="contact-icon">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
                        </svg>
                    </div>
                    <div class="contact-info">
                        <h3>LinkedIn</h3>
                        <p>Let's connect professionally</p>
                    </div>
                </a>
                
                <a href="mailto:elvisyanhaoyu@gmail.com" class="contact-card">
                    <div class="contact-icon">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M0 3v18h24v-18h-24zm6.623 7.929l-4.623 5.712v-9.458l4.623 3.746zm-4.141-5.929h19.035l-9.517 7.713-9.518-7.713zm5.694 7.188l3.824 3.099 3.83-3.104 5.612 6.817h-18.779l5.513-6.812zm9.208-1.264l4.616-3.741v9.348l-4.616-5.607z"/>
                        </svg>
                    </div>
                    <div class="contact-info">
                        <h3>Email</h3>
                        <p>Drop me a message</p>
                    </div>
                </a>
                <a href="https://app.joinhandshake.com/profiles/haoyu-yan" target="_blank" class="contact-card">
                    <div class="contact-icon">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M6 4v16h3v-6h6v6h3V4h-3v6H9V4H6z"/>
                        </svg>
                    </div>
                    <div class="contact-info">
                        <h3>Handshake</h3>
                        <p>Chat with me on Handshake</p>
                    </div>
                </a>
            </div>
            <div style="text-align: center; margin-top: 60px;">
                <a href="#home" class="cta-button">
                    <span>↑ Back to Top</span>
                </a>
            </div>
        </div>
    </section>

    <script>
        // Navbar scroll effect
        window.addEventListener('scroll', () => {
            const navbar = document.getElementById('navbar');
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });

        // Smooth scrolling
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Projects Carousel
        const projectsViewport = document.querySelector('.projects-carousel-viewport');
        const projectsGrid = document.querySelector('.projects-grid');
        const projectCards = document.querySelectorAll('.project-card');
        const leftArrow = document.querySelector('.carousel-arrow-left');
        const rightArrow = document.querySelector('.carousel-arrow-right');
        
        if (projectsViewport && projectsGrid && projectCards.length > 0 && leftArrow && rightArrow) {
            const cardsPerView = 3;
            const totalCards = projectCards.length;
            
            // Hide arrows if there are 3 or fewer cards
            if (totalCards <= cardsPerView) {
                leftArrow.style.display = 'none';
                rightArrow.style.display = 'none';
            } else {
                let currentIndex = 0;
                const maxIndex = Math.max(0, totalCards - cardsPerView);

                function updateCarousel() {
                    // Calculate the translateX value based on viewport width
                    const viewportWidth = projectsViewport.offsetWidth;
                    const gap = 30;
                    const cardWidth = (viewportWidth - (cardsPerView - 1) * gap) / cardsPerView;
                    const translateX = -currentIndex * (cardWidth + gap);
                    projectsGrid.style.transform = `translateX(${translateX}px)`;
                    
                    // Ensure grid width is set to show all cards in a row
                    const totalGridWidth = totalCards * cardWidth + (totalCards - 1) * gap;
                    projectsGrid.style.width = `${totalGridWidth}px`;
                    projectsGrid.style.gridTemplateColumns = `repeat(${totalCards}, ${cardWidth}px)`;

                    // Update arrow states
                    leftArrow.disabled = currentIndex === 0;
                    rightArrow.disabled = currentIndex >= maxIndex;
                }

                leftArrow.addEventListener('click', () => {
                    if (currentIndex > 0) {
                        currentIndex--;
                        updateCarousel();
                    }
                });

                rightArrow.addEventListener('click', () => {
                    if (currentIndex < maxIndex) {
                        currentIndex++;
                        updateCarousel();
                    }
                });

                // Initialize
                updateCarousel();

                // Handle window resize
                let resizeTimeout;
                window.addEventListener('resize', () => {
                    clearTimeout(resizeTimeout);
                    resizeTimeout = setTimeout(() => {
                        // Ensure currentIndex doesn't exceed maxIndex after resize
                        if (currentIndex > maxIndex) {
                            currentIndex = maxIndex;
                        }
                        updateCarousel();
                    }, 250);
                });
            }
        }

        // Intersection Observer for camera movement effect
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -100px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('in-view');
                    
                    // Animate skill bars when in view
                    if (entry.target.querySelector('.skill-progress')) {
                        entry.target.querySelectorAll('.skill-progress').forEach(bar => {
                            const width = bar.getAttribute('data-width');
                            setTimeout(() => {
                                bar.style.width = width + '%';
                            }, 200);
                        });
                    }
                }
            });
        }, observerOptions);

        // Observe all sections
        document.querySelectorAll('.section').forEach(section => {
            observer.observe(section);
        });

        // Observe contact links for animation
        const contactLinks = document.querySelector('.contact-links');
        if (contactLinks) {
            observer.observe(contactLinks);
        }

        // Mouse movement parallax effect
        document.addEventListener('mousemove', (e) => {
            const mouseX = e.clientX / window.innerWidth - 0.5;
            const mouseY = e.clientY / window.innerHeight - 0.5;
            
            const hero = document.querySelector('.hero');
            if (hero) {
                hero.style.transform = `rotateY(${mouseX * 10}deg) rotateX(${-mouseY * 10}deg)`;
            }
            
            document.querySelectorAll('.shape').forEach((shape, index) => {
                const speed = (index + 1) * 2;
                shape.style.transform += ` translateX(${mouseX * speed}px) translateY(${mouseY * speed}px)`;
            });
        });

        // Add some dynamic camera movement on scroll
        let ticking = false;
        function updateCameraAngle() {
            const scrolled = window.pageYOffset;
            const sections = document.querySelectorAll('.section');
            
            sections.forEach((section, index) => {
                const rect = section.getBoundingClientRect();
                const centerY = rect.top + rect.height / 2;
                const windowCenterY = window.innerHeight / 2;
                const distance = Math.abs(centerY - windowCenterY);
                
                if (distance < window.innerHeight) {
                    const rotation = (centerY - windowCenterY) / window.innerHeight * 10;
                    section.style.transform = `perspective(1000px) rotateX(${rotation}deg)`;
                }
            });
            
            ticking = false;
        }

        window.addEventListener('scroll', () => {
            if (!ticking) {
                requestAnimationFrame(updateCameraAngle);
                ticking = true;
            }
        });

        // ============================================
        // FIXED CURSOR TRAIL - follows during scroll
        // ============================================
        const cursorTrail = [];
        const trailLength = 12;
        
        // Current interpolated position (viewport coordinates for position:fixed)
        let trailX = window.innerWidth / 2;
        let trailY = window.innerHeight / 2;
        
        // Last known mouse position (viewport coordinates - from events)
        let lastKnownMouseX = window.innerWidth / 2;
        let lastKnownMouseY = window.innerHeight / 2;
        
        // Target position for the trail (viewport coordinates)
        let targetX = trailX;
        let targetY = trailY;

        // Create trail particles
        for (let i = 0; i < trailLength; i++) {
            const particle = document.createElement('div');
            particle.className = `cursor-trail particle-${(i % 5) + 1}`;
            particle.style.opacity = (trailLength - i) / trailLength * 0.6;
            particle.style.transform = `translate(-50%, -50%) scale(${1 - i * 0.08})`;
            document.documentElement.appendChild(particle);
            cursorTrail.push({
                element: particle,
                x: lastKnownMouseX,
                y: lastKnownMouseY,
                targetX: lastKnownMouseX,
                targetY: lastKnownMouseY
            });
        }

        // Track mouse position globally (viewport coordinates for position:fixed)
        document.addEventListener('mousemove', (e) => {
            lastKnownMouseX = e.clientX;
            lastKnownMouseY = e.clientY;
            targetX = e.clientX;
            targetY = e.clientY;
        });

        // Update target during wheel scroll (has coordinates)
        document.addEventListener('wheel', (e) => {
            lastKnownMouseX = e.clientX;
            lastKnownMouseY = e.clientY;
            targetX = e.clientX;
            targetY = e.clientY;
        }, { passive: true });

        // During scroll, aggressively keep particles aligned with mouse
        document.addEventListener('scroll', () => {
            targetX = lastKnownMouseX;
            targetY = lastKnownMouseY;
            
            // Also immediately update trailX/trailY to reduce lag during scroll
            trailX = lastKnownMouseX;
            trailY = lastKnownMouseY;
            
            // Snap all particles closer to mouse position during scroll
            cursorTrail.forEach((particle, index) => {
                particle.targetX = lastKnownMouseX;
                particle.targetY = lastKnownMouseY;
                // Quickly interpolate toward mouse
                particle.x += (lastKnownMouseX - particle.x) * 0.5;
                particle.y += (lastKnownMouseY - particle.y) * 0.5;
            });
        }, true);

        // Animation loop - always smooth, no special scroll handling needed
        function animateTrail() {
            // Smoothly interpolate the lead position toward target
            trailX += (targetX - trailX) * 0.4;
            trailY += (targetY - trailY) * 0.4;

            // Update each particle
            cursorTrail.forEach((particle, index) => {
                if (index === 0) {
                    // First particle follows the interpolated position
                    particle.targetX = trailX;
                    particle.targetY = trailY;
                } else {
                    // Each subsequent particle follows the one before it
                    const prevParticle = cursorTrail[index - 1];
                    particle.targetX += (prevParticle.x - particle.targetX) * 0.6;
                    particle.targetY += (prevParticle.y - particle.targetY) * 0.6;
                }

                // Smooth movement toward target
                particle.x += (particle.targetX - particle.x) * 0.7;
                particle.y += (particle.targetY - particle.y) * 0.7;

                // Calculate visual properties
                const scale = 1 - (index / trailLength) * 0.5;
                const opacity = (trailLength - index) / trailLength * 0.6;
                
                // Apply styles
                particle.element.style.left = particle.x + 'px';
                particle.element.style.top = particle.y + 'px';
                particle.element.style.opacity = opacity;
                particle.element.style.transform = `translate(-50%, -50%) scale(${scale})`;
            });

            requestAnimationFrame(animateTrail);
        }

        // Handle mouse leaving/entering the window
        document.addEventListener('mouseleave', () => {
            cursorTrail.forEach(particle => {
                particle.element.style.opacity = '0';
            });
        });

        document.addEventListener('mouseenter', (e) => {
            lastKnownMouseX = e.clientX;
            lastKnownMouseY = e.clientY;
            targetX = e.clientX;
            targetY = e.clientY;
            
            cursorTrail.forEach((particle, index) => {
                particle.element.style.opacity = (trailLength - index) / trailLength * 0.6;
            });
        });

        // Start the animation
        animateTrail();
    </script>
</body>
</html>